---
layout: post
title: 跨域方法总结
subtitle: Web Development学习笔记系列
date: 2019-03-29
author: Jalever
header-img: img/post-bg-js-version.jpg
catalog: true
tags:
  - JavaScript
  - Web Development
---

- [`webpack-dev-server`实现跨域](#webpack-dev-server%E5%AE%9E%E7%8E%B0%E8%B7%A8%E5%9F%9F)
- [通过`jsonp`跨域](#%E9%80%9A%E8%BF%87jsonp%E8%B7%A8%E5%9F%9F)
- [通过`document.domain` + `iframe`跨域](#%E9%80%9A%E8%BF%87documentdomain--iframe%E8%B7%A8%E5%9F%9F)
- [通过`location.hash` + `iframe`跨域](#%E9%80%9A%E8%BF%87locationhash--iframe%E8%B7%A8%E5%9F%9F)
- [通过`window.name` + `iframe`跨域](#%E9%80%9A%E8%BF%87windowname--iframe%E8%B7%A8%E5%9F%9F)
- [`postMessage`跨域](#postmessage%E8%B7%A8%E5%9F%9F)
- [跨域资源共享（CORS）](#%E8%B7%A8%E5%9F%9F%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%ABcors)
- [`nginx`代理跨域](#nginx%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F)
- [`nodejs`中间件代理跨域](#nodejs%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F)
    - [1.`cors`包](#1cors%E5%8C%85)
    - [2.`res.header`](#2resheader)
- [`WebSocket`协议跨域](#websocket%E5%8D%8F%E8%AE%AE%E8%B7%A8%E5%9F%9F)

## `webpack-dev-server`实现跨域

在`index.jsx`中发出 AJAX 请求

```javascript
function LoadDoc() {
  let xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
      Clipboard(this.responseText);
    }
  };

  xhttp.open("GET", "api/user", true);
  xhttp.send();
}
```

在`webpack.config.js`中`devServer`实现跨域:

```javascript
devServer: {
		contentBase: "./dist",
		hot: true,
		proxy: {
			"*": {
				target: "http://47.106.132.253:8081",//我的服务器地址:端口
				changeOrigin: true,//是否变域
				secure: false//是否支持https协议
			}
		}
	},
```

## 通过`jsonp`跨域

## 通过`document.domain` + `iframe`跨域

## 通过`location.hash` + `iframe`跨域

## 通过`window.name` + `iframe`跨域

## `postMessage`跨域

## 跨域资源共享（CORS）

## `nginx`代理跨域

## `nodejs`中间件代理跨域

#### 1.`cors`包

- Simple Usage

```javascript
var express = require("express");
var cors = require("cors");
var app = express();

app.use(cors());

app.get("/products/:id", function(req, res, next) {
  res.json({ msg: "This is CORS-enabled for all origins!" });
});

app.listen(80, function() {
  console.log("CORS-enabled web server listening on port 80");
});
```

#### 2.`res.header`

```javascript
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");
  next();
});
```

## `WebSocket`协议跨域

---
layout: post
title: 如何创建一个正方体
subtitle: Three.js学习笔记系列 1
date: 2019-03-30
author: Jalever
header-img: img/post_bg_milkyway.jpg
catalog: true
tags:
  - Three
---

- [引入 NPM 文件](#%E5%BC%95%E5%85%A5-npm-%E6%96%87%E4%BB%B6)
- [静态 Cube](#%E9%9D%99%E6%80%81-cube)
- [动态 Cube](#%E5%8A%A8%E6%80%81-cube)
- [更改背景图片](#%E6%9B%B4%E6%94%B9%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87)
- [滚轮缩放](#%E6%BB%9A%E8%BD%AE%E7%BC%A9%E6%94%BE)
- [设置灯光效果](#%E8%AE%BE%E7%BD%AE%E7%81%AF%E5%85%89%E6%95%88%E6%9E%9C)
    - [Light](#light)
    - [AmbientLight](#ambientlight)
    - [DirectionalLight](#directionallight)
    - [HemisphereLight](#hemispherelight)
    - [PointLight](#pointlight)
    - [RectAreaLight](#rectarealight)
    - [SpotLight](#spotlight)
- [Loaders](#loaders)

## 引入 NPM 文件

```javascript
import * as THREE from "three";
```

## 静态 Cube

```javascript
var WIDTH = window.innerWidth;
var HEIGHT = window.innerHeight;

//创建场景
let scene = new THREE.Scene();

//相机
let camera = new THREE.PerspectiveCamera(45, WIDTH / HEIGHT, 0.1, 1000);
camera.position.set(15, 12, 0);
camera.lookAt(scene.position);

//设置画布大小
let renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(WIDTH, HEIGHT);
renderer.setClearColor(0xadd8e6, 1);

//加入到body
document.body.appendChild(renderer.domElement);

//创建几何体
var geometry = new THREE.BoxGeometry(1, 1, 1);
var material = new THREE.MeshNormalMaterial();
var cube = new THREE.Mesh(geometry, material);

//加入到场景
scene.add(cube);

//渲染
renderer.render(scene, camera);
```

## 动态 Cube

```javascript
var WIDTH = window.innerWidth;
var HEIGHT = window.innerHeight;

//创建场景
let scene = new THREE.Scene();

//相机
let camera = new THREE.PerspectiveCamera(45, WIDTH / HEIGHT, 0.1, 1000);
camera.position.set(15, 12, 0);
camera.lookAt(scene.position);

//设置画布大小
let renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(WIDTH, HEIGHT);
renderer.setClearColor(0xadd8e6, 1);

//加入到body
document.body.appendChild(renderer.domElement);

//创建几何体
var geometry = new THREE.BoxGeometry(1, 1, 1);
var material = new THREE.MeshNormalMaterial();
var cube = new THREE.Mesh(geometry, material);

//加入到场景
scene.add(cube);

//渲染循环
function animate() {
  let SPEED = 0.01;

  requestAnimationFrame(animate);

  cube.rotation.x -= SPEED * 2;
  cube.rotation.y -= SPEED;
  cube.rotation.z -= SPEED * 4;

  renderer.render(scene, camera);
}
animate();
```

## 更改背景图片

```javascript
var bgImg = new THREE.TextureLoader().load(require("./home-bg-geek.jpg"));
scene.background = bgImg;
```

## 滚轮缩放

先引进`NPM`模块

```javascript
import OrbitControls from "three-orbitcontrols";
```

相关代码

```javascript
var controls = new OrbitControls(camera, renderer.domElement);
controls.update();
controls.enableDamping = true;
controls.dampingFactor = 0.25;
controls.enableZoom = true;
```

## 设置灯光效果

#### Light

#### AmbientLight

This light globally illuminates all objects in the scene equally.<br>
This light cannot be used to cast shadows as it does not have a direction

#### DirectionalLight

A light that gets emitted in a specific direction.<br>
This light will behave as though it is infinitely far away.<br>
The rays produced from it are all parallel.<br>
This light can cast shadows.

#### HemisphereLight

A light source positioned directly above the scene, with color fading from the sky color to the ground color.<br>
This light cannot be used to cast shadows.

#### PointLight

A light that gets emitted from a single point in all directions. <br>
A common use case for this is to replicate the light emitted from a bare lightbulb.<br>
This light can cast shadows

#### RectAreaLight

`RectAreaLight` emits light uniformly across the face a rectangular plane.<br>
This light type can be used to simulate light sources such as bright windows or strip lighting.<br>
Important Notes:

- There is no shadow support.
- Only MeshStandardMaterial and MeshPhysicalMaterial are supported.
- You have to include RectAreaLightUniformsLib into your scene.

#### SpotLight

This light gets emitted from a single point in one direction, along a cone that increases in size the further from the light it gets.<br>
This light can cast shadows

1. 添加`DirectionalLight`灯光

```javascript
var light = new THREE.DirectionalLight(0xffffff, 0.6);
light.castShadow = true;
scene.add(light);
```

2. 告诉渲染器需要阴影效果

```javascript
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap; // 默认的是，没有设置的这个清晰 THREE.PCFShadowMap
```

3. 设置 `plane` 接收影子

```javascript
plane.receiveShadow = true;
```

4. 告诉 `cube` 需要投射阴影

```javascript
cube.castShadow = true;
```

## Loaders

- \*.obj
- _.obj, _.mtl
- \*.dae
- \*.ctm
- \*.ply
- \*.stl
- \*.wrl
- \*.vtk
